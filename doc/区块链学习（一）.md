#区块链学习（一）

##背景
在微信公众号上看到的一篇关于互联网金融的文章[1]，开始对区块链进行了解，并记下理解。

##了解的区块链
###比特币区块链
比特币和区块链相互成就，造就了这个数字货币的繁荣景象。其实在这中间并没有新的技术产生，这是一系列技术的应用：
- 散列算法（sha256）
- 工作量证明PoW[2]
- 非对称加密
- P2P网络
使得区块链的特点就是去中心化，公开透明，不可篡改，自治。

###“使用”过程
1. 付款方广播信息
每笔交易的付款方会将交易的信息用私钥进行签名——解决了交易作假的问题。

2. 所有节点竞争记账
每个收到广播信息的节点均会竞争记账的权力，将这笔交易记录到时间序列的账本——区块链。

3. 记账完成
当记账完成之后，这笔交易就转账完成了。

###需要理解的区块链
1. “账本”--区块链的核心
“币”并不是链中的关键点，一个去中心化的“账本”才是。做一个形象的类比，假如区块链是一个实物账本，一个区块就相当于账本中的一页，区块中承载的信息，就是这一页上记载的交易内容。
这个“账本”每个节点都会有一份，大家都可以在这个账本上记录，那就产生了一致性的问题。一致性问题的解决方案是工作量证明，即下一点：竞争与激励。

2. 竞争与激励
  * 竞争的是记账的权力
  * 激励的是数字货币
记账的权力是每个矿工的目标，记账即意味着收入。所以记账的权力需要竞争，这就应用到了工作量证明。每个矿工按照一定的规则对每一笔交易进行大量hash计算，直到算出一个符合约定的值。这个过程需要大量的算力支持，所以每个高性能矿工胜出的概率也就越大。
同时，这个机制不仅解决了货币发行的问题，还对这个系统产生正向的驱动。


###几个难点
1. 工作量证明
过程：
>1. 生成Coinbase交易，并与其他所有准备打包进区块的交易组成交易列表，通过Merkle Tree算法生成Merkle Root Hash
>2. 把Merkle Root Hash及其他相关字段组装成区块头，将区块头的80字节数据（Block Header）作为工作量证明的输入
>3. 不停的变更区块头中的随机数即nonce的数值，并对每次变更后的的区块头做双重SHA256运算（即SHA256(SHA256(Block_Header))），将结果值与当前网络的目标值做对比，如果小于*目标值*，则解题成功，工作量证明完成。
>目标值=最大目标值/*难度值*
>新难度值=旧难度值 * ( 过去2016个区块花费时长 / 20160 分钟 )

2. UTXO
>UTXO（Unspent Transaction Outputs）是未花费的交易输出，它是比特币交易生成及验证的一个核心概念。交易构成了一组链式结构，所有合法的比特币交易都可以追溯到前向一个或多个交易的输出，这些链条的源头都是挖矿奖励，末尾则是当前未花费的交易输出。所有的未花费的输出即整个比特币网络的UTXO。
比特币规定每一笔新的交易的输入必须是某笔交易未花费的输出，每一笔输入同时也需要上一笔输出所对应的私钥进行签名，并且每个比特币的节点都会存储当前整个区块链上的UTXO，整个网络上的节点通过UTXO及签名算法来验证新交易的合法性。这样，节点不需要追溯历史就可以验证新交易的合法性。


##文章来源
>[1.当互联网金融遇到区块链](https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&mid=2650995035&idx=1&sn=e4c87e7fef969ba97e4b7004f5dc3311&chksm=bdbf01088ac8881efd55bc5a59a17bbd386aa2bb9a4891be5f692134da8711ac7d6b492125bb&scene=0&pass_ticket=ITag2%2BudfD8xZ0yjAyiB3KczV3B%2Fo6qcpxjGWnpALlI%3D#rd)
>[2.揭秘比特币和区块链（二）：什么是工作量证明？](http://www.infoq.com/cn/articles/bitcoin-and-block-chain-part02?utm_source=infoq&utm_medium=related_content_link&utm_campaign=relatedContent_articles_clk)